# Dhammanjali Fantasy Cricket - Project TODO

## Phase 1: Setup & Design
- [x] Configure Red/Yellow/Blue color theme
- [x] Setup global styles and typography
- [x] Add cricket-themed fonts

## Phase 2: Custom Authentication System
- [x] Create custom user registration (no Manus OAuth)
- [x] Build login system with email/password
- [x] Implement password reset functionality
- [x] Add age verification (18+)
- [x] State-based restrictions (AP, Assam, Odisha, Telangana, Nagaland, Sikkim)
- [x] Session management with JWT
- [x] Database schema for users

## Phase 3: Navigation & Layout
- [x] Dynamic header navigation (Login/Register when logged out, Dashboard/Logout when logged in)
- [x] Footer with legal disclaimer
- [x] Responsive mobile navigation
- [ ] Protected route guards

## Phase 4: Informational Pages
- [x] Homepage with hero section
- [x] About Us page
- [ ] How To Play page
- [ ] FAQ page
- [ ] Terms and Conditions page
- [ ] Privacy Policy page
- [ ] Fair Play Policy page
- [ ] Responsible Gaming page
- [ ] Blog listing page
- [x] Contact Us page

## Phase 5: User Features
- [x] User Dashboard
- [ ] Profile Settings page
- [ ] User profile management

## Phase 6: Fantasy Cricket Core Features
- [ ] Match listing page (Select Matches)
- [ ] Player selection interface (Build Team)
- [ ] Team builder with cricket positions
- [ ] Final team confirmation
- [ ] Leaderboard display
- [ ] Points calculation system
- [ ] Match status tracking

## Phase 7: Legal & Compliance
- [ ] 18+ logo/badge
- [ ] Fair Play logo/badge
- [ ] Footer legal disclaimer
- [ ] State restriction enforcement
- [ ] Age verification on registration

## Phase 8: Testing & Polish
- [ ] Test all authentication flows
- [ ] Test dynamic navigation states
- [ ] Test fantasy cricket features
- [ ] Mobile responsiveness check
- [ ] Cross-browser testing
- [ ] Create final checkpoint


## Bug Fixes
- [x] Fix nested <a> tag error in Header component

## Design Update - Cricket Clash Style
- [x] Redesign homepage with diagonal cuts and angular shapes
- [x] Add cricket player action photos to hero section
- [x] Create feature highlight boxes (Daily Contests, Create Team, Live Scoring)
- [x] Add "Top Players Today" leaderboard widget
- [x] Implement diagonal red/yellow accent stripes
- [x] Update header with angular logo design
- [x] Add cricket ball and bat graphics
- [x] Create statistics dashboard preview section

## Footer Update
- [x] Redesign footer with Cricket Clash style (diagonal cuts, bold colors)

## Bug Fixes (New)
- [x] Fix nested anchor tags in Home page buttons

## Branding Update
- [x] Change header logo from "CRICKETCLASH" to "DHAMMANJALI"
- [x] Update homepage branding from "CRICKET CLASH" to "DHAMMANJALI"

## Homepage Content Enhancement
- [x] Replace placeholder content with real, detailed information
- [x] Add comprehensive feature descriptions
- [x] Include actual statistics and benefits
- [x] Add detailed "How It Works" section
- [x] Create meaningful mission and educational focus sections

## Bug Fixes (Image)
- [x] Fix hero section cricket player image not displaying

## Visual Enhancement
- [x] Add shadow effect behind hero section cricket player image

## UI Enhancement
- [x] Change "START PLAYING FREE" button to yellow color

## Logo Design
- [x] Create custom Dhammanjali logo matching Cricket Clash design style
- [x] Incorporate cricket elements (ball, bat, wickets)
- [x] Use red/yellow/blue color scheme
- [x] Replace current logo in header

## Logo Update
- [x] Replace AI-generated logo with user-provided custom logo

## Logo Size Adjustment
- [x] Verify logo height increase from 56px to 100px via visual editor
- [x] Increase header height to accommodate larger logo

## Header Height Adjustment
- [x] Reduce header height back to original (h-20) while keeping large logo

## About Page Redesign
- [x] Create comprehensive About Us page with deep detailed content
- [x] Add company history and background
- [x] Include mission, vision, and values
- [x] Add team information (CEO & Founder)
- [x] Explain free-to-play model in detail
- [x] Add company registration details (CIN, PAN, addresses)
- [x] Include investor backing information
- [x] Add Cricket Clash design elements

## Footer Enhancement
- [x] Add Dhammanjali logo to footer

## How To Play Page
- [x] Create comprehensive tutorial page with step-by-step instructions
- [x] Add detailed gameplay rules and mechanics
- [x] Include scoring system explanation
- [x] Add player selection strategy tips
- [x] Explain team building with budget constraints
- [x] Add match selection guide
- [x] Include leaderboard and ranking system explanation
- [x] Add visual sections with Cricket Clash design
- [x] Create common mistakes section

## Terms & Conditions Page
- [x] Create comprehensive legal terms page
- [x] Add user agreement and acceptance section
- [x] Include age verification requirements (18+)
- [x] Add state restrictions details
- [x] Include platform usage rules
- [x] Add account registration terms
- [x] Include intellectual property rights
- [x] Add liability disclaimers
- [x] Include termination and suspension policies
- [x] Add dispute resolution procedures
- [x] Include governing law and jurisdiction
- [x] Add modification of terms policy
- [x] Include contact information for legal queries

## Privacy Policy Page
- [x] Create comprehensive privacy policy page
- [x] Add information collection section
- [x] Include data usage and processing details
- [x] Add data storage and security measures
- [x] Include cookie policy
- [x] Add third-party services disclosure
- [x] Include user rights (access, deletion, modification)
- [x] Add data retention policies
- [x] Include children's privacy protection
- [x] Add international data transfers information
- [x] Include contact information for privacy queries
- [x] Add GDPR compliance information
- [x] Include policy modification procedures

## Fair Play Policy Page
- [x] Create comprehensive Fair Play Policy page
- [x] Add platform integrity and fair competition principles
- [x] Include anti-cheating measures and detection systems
- [x] Add prohibited activities and violations
- [x] Include multiple account policy
- [x] Add collusion and match-fixing prevention
- [x] Include bot and automation detection
- [x] Add account security guidelines
- [x] Include reporting mechanisms for violations
- [x] Add investigation and enforcement procedures
- [x] Include penalties and consequences for violations
- [x] Add appeals process
- [x] Include commitment to fair play statement

## Responsible Gaming Page
- [x] Create comprehensive Responsible Gaming page
- [x] Add healthy gaming habits and guidelines
- [x] Include time management tips and tools
- [x] Add signs of problem gaming behavior
- [x] Include self-assessment tools
- [x] Add setting personal limits guidance
- [x] Include break reminders and healthy practices
- [x] Add support resources and helplines
- [x] Include educational content about balance
- [x] Add commitment to player wellbeing statement
- [x] Include parental guidance section
- [x] Add contact information for concerns

## Regional Office Address Update
- [x] Update Footer with Regional Office address (BTM 2nd Stage, Bengaluru)
- [x] Update About page with Regional Office address

## Contact Page Redesign
- [x] Create comprehensive Contact Us page with Cricket Clash design
- [x] Add functional contact form with validation
- [x] Include company contact information (email, phone)
- [x] Add both office addresses (Registered and Regional)
- [x] Create database schema for contact form submissions
- [x] Add backend tRPC procedure to handle form submissions
- [x] Include success/error messages for form submission

## Regional Office Address Change
- [x] Update Footer with new Regional Office address (Vidyaranyapura, Bengaluru)
- [x] Update About page with new Regional Office address
- [x] Update Contact page with new Regional Office address

## Footer Logo Size Update
- [x] Verify footer logo height increase from 64px to 81px via visual editor

## Contact Page Update
- [x] Remove "Call Us" box from Contact page

## Login & Register Page Redesign
- [x] Redesign Login page with Cricket Clash style and detailed content
- [x] Redesign Register page with Cricket Clash style and comprehensive form
- [x] Add visual elements (cricket imagery, diagonal cuts, colorful sections)
- [x] Include benefits and features information on auth pages
- [x] Add proper validation messages and user guidance

## Forgot Password Feature
- [x] Create Forgot Password page with Cricket Clash design
- [x] Implement password reset request backend endpoint
- [x] Add password reset token generation and storage
- [ ] Create reset password confirmation page
- [ ] Add email notification for password reset
- [x] Link forgot password page from login page
- [ ] Test complete password reset flow

## Simplified Password Reset Flow
- [x] Update forgot password page to validate email first
- [x] Store validated email in localStorage
- [x] Show new password form immediately after email validation
- [x] Update backend to accept email-based password reset
- [x] Remove token-based reset flow
- [x] Test complete simplified reset flow

## FAQ Page Implementation
- [x] Create FAQ page with accordion-style layout
- [x] Add basic questions (registration, login, password reset)
- [x] Add gameplay questions (team building, match selection, scoring)
- [x] Add complex questions (scoring calculations, strategy, player selection)
- [x] Add legal/compliance questions (state restrictions, age verification, free-to-play)
- [x] Add technical questions (browser compatibility, troubleshooting)
- [x] Organize questions into categories with Cricket Clash design
- [x] Add FAQ route to App.tsx
- [x] Link FAQ page from header navigation
- [x] Test all accordion interactions

## Authentication Flow Fixes
- [x] Fix login page to redirect to dashboard after successful login
- [x] Update header navigation to show Dashboard and Logout when logged in
- [x] Hide Login and Register buttons when user is authenticated
- [x] Show user name/profile in header when logged in
- [x] Test complete login flow (login -> dashboard -> logout -> home)
- [x] Ensure auth state persists across page refreshes

## Login Redirect Issue Debugging
- [x] Test actual login flow with real credentials
- [x] Check if login mutation is completing successfully
- [x] Verify dashboard route exists and is accessible
- [x] Check browser console for any errors during login
- [x] Test if setLocation is working properly
- [x] Add better error handling and logging to login flow
- [x] Ensure redirect happens after query invalidation completes

## Login Form Submission Bug Fix
- [x] Investigate why login button click doesn't trigger mutation (FOUND: Mutation IS triggering)
- [x] Check if form onSubmit handler is properly attached (YES - working correctly)
- [x] Verify tRPC client configuration and mutation setup (YES - mutation succeeds)
- [x] Test if button type="submit" is correct (YES - form submission works)
- [x] Check for any JavaScript errors preventing mutation (NO errors - mutation completes)
- [ ] **CRITICAL ISSUE**: Cookie is not being set despite successful login
- [ ] Investigate why res.cookie() doesn't persist session cookie
- [ ] Check tRPC response handling for Set-Cookie headers
- [ ] Consider alternative session management (localStorage tokens, different cookie config)
- [ ] Test if Express cookie-parser middleware is configured correctly

## Header Navigation Update for Logged-in Users
- [x] Update Header component to show Leaderboard, Matches, Profile, Logout when authenticated
- [x] Remove HOME, ABOUT US, HOW TO PLAY, FAQ, BLOG, CONTACT from authenticated header
- [ ] Test header navigation switches based on auth state

## Core Fantasy Cricket Features - Real API Implementation
- [x] Create database schema for matches table
- [x] Create database schema for players table
- [x] Create database schema for user_teams table
- [x] Create database schema for team_players table
- [x] Create database schema for user_stats table (for leaderboard)
- [x] Push database schema changes
- [x] Create backend tRPC procedure to fetch matches
- [x] Create backend tRPC procedure to fetch players
- [x] Create backend tRPC procedure to create teams
- [x] Create backend tRPC procedure to fetch leaderboard
- [x] Create backend tRPC procedure to fetch user profile stats
- [x] Rebuild Matches page with real API data
- [x] Rebuild Leaderboard page with real API data
- [x] Create Profile page with real user data
- [x] Add seed data for matches and players
- [x] Test complete fantasy cricket workflow

## Cricket API Integration with Smart Caching
- [x] Create API service layer for CricketData.org API
- [x] Add API key configuration and rate limiting logic
- [x] Update database schema to add lastUpdated timestamp to matches and players tables
- [x] Create API cache tracking table to monitor API usage
- [x] Implement fetchCurrentMatches function to get live matches from API
- [x] Implement fetchMatchInfo function to get detailed match data
- [x] Implement fetchPlayers function to get player data
- [x] Create caching logic: serve from DB if data < 30 minutes old
- [x] Create background job to auto-update data every 30 minutes
- [x] Add API call counter to stay within 100 calls/24hr limit (48 calls if updating every 30 min)
- [ ] Update backend tRPC procedures to use cached data from database
- [ ] Test API integration with real API key
- [ ] Verify caching system works correctly
- [ ] Verify auto-update job runs every 30 minutes
- [ ] Monitor API usage to ensure it stays under limit

## Replace Manus Auth with Custom Authentication
- [x] Remove Manus OAuth dependencies from backend
- [x] Update database schema to add OTP verification fields (otpCode, otpExpiry)
- [x] Install bcrypt and jsonwebtoken packages
- [x] Create JWT authentication service (generateToken, verifyToken)
- [x] Create OTP generation and verification service
- [x] Update register endpoint to use custom JWT auth
- [x] Update login endpoint to return JWT token instead of setting cookie
- [x] Remove cookie-based session management
- [x] Update authRouter to use JWT verification middleware
- [x] Update frontend useAuth hook to use localStorage tokens
- [x] Update frontend login page to store JWT in localStorage
- [x] Update frontend register page to store JWT in localStorage
- [x] Add Authorization header to all tRPC requests
- [x] Update logout to clear localStorage instead of cookie
- [x] Test complete registration flow with JWT
- [x] Test complete login flow with JWT
- [x] Test protected routes with JWT authentication
- [x] Verify dashboard access works with new auth system

## Bug Fix: About Page MapPin Error
- [x] Fix MapPin icon import error in About page
- [x] Test About page loads without errors

## Detailed About Page Rewrite
- [x] Expand company history with founding story and timeline
- [x] Add detailed explanation of free-to-play business model
- [x] Create comprehensive platform features section
- [x] Add detailed educational benefits breakdown
- [x] Expand legal compliance and state restrictions explanation
- [x] Add detailed investor information section
- [x] Create comprehensive responsible gaming policies section
- [x] Add user testimonials and success stories
- [x] Include detailed roadmap and future plans
- [x] Add embedded FAQ section within About page
- [x] Test About page with all new detailed content

## UX Improvements - Dec 19, 2024
- [x] Add scroll-to-top behavior when navigating between pages
- [x] Remove phone number field from registration form
- [x] Remove phone number from database schema (users table)
- [x] Remove phone number from backend validation
- [x] Remove phone number from Contact page
- [x] Test all pages for scroll-to-top functionality

## CricketData.org API Integration - Dec 19, 2024
- [x] Access CricketData.org member portal and review API documentation
- [x] Identify available API endpoints (matches, players, live scores, statistics)
- [x] Store API credentials securely using webdev_request_secrets
- [x] Test API authentication and basic endpoints
- [x] Implement match listing endpoint integration
- [x] Implement player data fetching for team building
- [x] Implement live score updates for ongoing matches
- [x] Create automated background sync for match data
- [x] Update database schema if needed for API data structure
- [x] Enable background sync on server startup
- [x] Test complete API integration flow
- [x] Handle API rate limits and error scenarios
